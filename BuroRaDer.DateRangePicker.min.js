!function(t){"use strict";window.BuroRaDer=window.BuroRaDer||{},window.BuroRaDer.DateRangePicker={_attachDatepicker:function(e,a){var n=t(e).attr("data-date-range-end")||t(e).attr("data-date-range-start");if(n&&(a=t.extend({},window.BuroRaDer.DateRangePickerSettings,a||{})),Object.getPrototypeOf(this)._attachDatepicker.call(this,e,a),n){var r=this._getInst(e);r.orgMinDate=this._get(r,"minDate")}},_newInst:function(e,a){var n=Object.getPrototypeOf(this)._newInst.call(this,e,a);return(e.attr("data-date-range-end")||e.attr("data-date-range-start"))&&(n.rangeStart=null,n.rangeEnd=null,e.attr("data-date-range-end")?(n.inputStart=e,n.inputEnd=t(e.attr("data-date-range-end"))):(n.inputEnd=e,n.inputStart=t(e.attr("data-date-range-start")))),n},compareDates:function(t,e){return t.getUTCFullYear()<e.getUTCFullYear()?-1:t.getUTCFullYear()>e.getUTCFullYear()?1:t.getUTCMonth()<e.getUTCMonth()?-1:t.getUTCMonth()>e.getUTCMonth()?1:t.getUTCDate()<e.getUTCDate()?-1:t.getUTCDate()>e.getUTCDate()?1:0},isDateRangePicker:function(e){var a=e instanceof Element?this._getInst(e):e instanceof jQuery?this._getInst(e[0]):"string"==typeof e?this._getInst(t(e)[0]):e;return a&&a.inputStart&&a.inputEnd?a:null},_updateDatepicker:function(e){if(Object.getPrototypeOf(this)._updateDatepicker.call(this,e),e=this.isDateRangePicker(e),null!==e){var a=t('<button type="button" class="ui-state-default ui-priority-primary ui-corner-all" data-handler="reset" data-event="click">'+this._get(e,"clearText")+"</button>"),n=t('<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"doneText")+"</button>");n.click(function(){t.datepicker._hideDatepicker()}),a.click(function(){t.datepicker._clearDate(e.input[0])}),this._get(e,"showSplitDay")?e.dpDiv.removeClass("date-range-full-day").addClass("date-range-split-day"):e.dpDiv.removeClass("date-range-split-day").addClass("date-range-full-day"),this._get(e,"isTo1")?e.dpDiv.removeClass("date-range-is-to").addClass("date-range-is-to1"):e.dpDiv.removeClass("date-range-is-to1").addClass("date-range-is-to"),e.dpDiv.append(a,n)}},_clearDate:function(t){var e=this.isDateRangePicker(t);null!==e&&(e.currentDay=null,e.selectedMonth=null,e.selectedYear=null,this.selectStartDate(e,""),this.selectEndDate(e,"")),Object.getPrototypeOf(this)._clearDate.call(this,t),this._updateDatepicker(e)},_setDateFromField:function(t,e){Object.getPrototypeOf(this)._setDateFromField.call(this,t,e),t=this.isDateRangePicker(t),null!==t&&(this.selectStartDate(t,t.inputStart.val()),this.selectEndDate(t,t.inputEnd.val()))},set1Date:function(e,a,n){var r,i=this._get(e,"dateFormat"),s=this._getFormatConfig(e);try{r=this.parseDate(i,n,s),r||(r=null)}catch(l){r=null}var d=e["input"+a],c=d.val();if(e["range"+a]=r,d.val(n),"Start"===a)if(r){var o=new Date(r);o.setDate(o.getDate()+this._get(e,"minRangeDuration")),e.settings.minDate=t.datepicker.formatDate(i,o)}else e.settings.minDate=e.orgMinDate;n!==c&&d.change()},selectStartDate:function(t,e){this.set1Date(t,"Start",e)},selectEndDate:function(t,e){this.set1Date(t,"End",e)},_selectDate:function(t,e){var a=this.isDateRangePicker(t);if(null!==a){if(e=null!==e?e:this._formatDate(a)){null===a.rangeStart?this.selectStartDate(a,e):this.selectEndDate(a,e),this._updateAlternate(a);var n=this._get(a,"onSelect");n&&n.apply(a.input?a.input[0]:null,[e,a]),this._updateDatepicker(a),a.inline||null===a.rangeStart||null===a.rangeEnd||a.hiddenOnce||(a.hiddenOnce=!0,this._hideDatepicker())}}else Object.getPrototypeOf(this)._selectDate.call(this,t,e)},beforeShowDay:function(e){var a="";if(this){var n=t.datepicker,r=n.isDateRangePicker(this);if(null!==r&&null!==r.rangeStart)if(null!==r.rangeEnd){var i=n.compareDates(e,r.rangeStart);if(i>0){var s=n.compareDates(e,r.rangeEnd);0>s?a="date-range-in":0===s&&(a="date-range-end")}else 0===i&&(a="date-range-start")}else a=0===n.compareDates(e,r.rangeStart)?"date-range-start":""}return[!0,a]}},window.BuroRaDer.DateRangePickerSettings={numberOfMonths:2,minRangeDuration:0,isTo1:!1,showSplitDay:!1,beforeShowDay:window.BuroRaDer.DateRangePicker.beforeShowDay,doneText:"Done",clearText:"Clear selected date(s)"},t.extend(t.datepicker,window.BuroRaDer.DateRangePicker)}(jQuery);